

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Vizualizacija podatkov &#8212; Zvezek za predmet Podatkovna analiza in pravno varstvo podatkov</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'vizualizacija';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Osnovna analiza podatkov" href="osnovna-analiza.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Zapiski pri predmetu Podatkovna analiza in pravno varstvo podatkov
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Namesto uvoda</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="uvod-izpeljani-seznami.html">Izpeljani seznami (angl. <em>list comprehensions</em>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="uvod-funkcije-visjega-reda.html">Funkcije višjega reda</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Podatkovni tipi v pandas</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="pt-zaporedja.html">Zaporedja, <em>Series</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="pt-podatkovni-okviri.html">Podatkovni okviri (tudi podatkovne tabele), <em>DataFrame</em></a></li>

<li class="toctree-l1"><a class="reference internal" href="pt-naloge.html">Naloge</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Uvoz in urejanje podatkov</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="urejanje-podatkov.html">Od podatkov do podatkovnih tabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="uvoz-urejanje-sql.html">Urejanje podatkov v <code class="docutils literal notranslate"><span class="pre">pandas</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="uvoz-urejanje-ri.html">Urejanje besedilnih podatkov in regularni izrazi</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Analiza in vizualizacija podatkov</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="osnovna-analiza.html">Osnovna analiza podatkov</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Vizualizacija podatkov</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ljupco-todorovski/papvp" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ljupco-todorovski/papvp/issues/new?title=Issue%20on%20page%20%2Fvizualizacija.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/vizualizacija.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Vizualizacija podatkov</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#podatkovna-tabela-data-estetska-preslikava-spremenljivke-aes-in-geometrijski-objekt-geom">Podatkovna tabela <code class="docutils literal notranslate"><span class="pre">data</span></code>, estetska preslikava spremenljivke <code class="docutils literal notranslate"><span class="pre">aes</span></code> in geometrijski objekt <code class="docutils literal notranslate"><span class="pre">geom</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometrijski-objekt-tocka">Geometrijski objekt točka</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometrijski-objekt-stolpec">Geometrijski objekt stolpec</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometrijski-objekt-crta">Geometrijski objekt črta</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometrijski-objekt-skatla">Geometrijski objekt škatla</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plasti-angl-layers-statisticnega-diagrama">Plasti (angl. <em>layers</em>) statističnega diagrama</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lestvice-legende-koordinatne-osi-in-koordinatni-sistemi">Lestvice, legende, koordinatne osi in koordinatni sistemi</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcije-za-koordinatne-osi-in-koordinatni-sistem">Funkcije za koordinatne osi in koordinatni sistem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcije-za-legende">Funkcije za legende</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prilagajanje-pozicije-angl-position-adjustment">Prilagajanje pozicije, angl. <em>position adjustment</em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vec-vidikov-angl-faceting">Več vidikov, angl. <em>faceting</em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#naloge">Naloge</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="vizualizacija-podatkov">
<h1>Vizualizacija podatkov<a class="headerlink" href="#vizualizacija-podatkov" title="Permalink to this heading">#</a></h1>
<p>Vizualizacija podatkov je faza analize podatkov, kjer poskrbimo za grafično ponazoritev tabelaričnih podatkov. Osnovno orodje pri vizualizaciji je <strong>statistični diagram</strong>. Slednji je preslikava spremenljivk podatkovne tabele v estetske lastnosti geometrijskih objektov. Tako, na primer, <em>razsevni diagram</em> preslika vrednosti numeričnih spremenljivk <span class="math notranslate nohighlight">\(X\)</span> in <span class="math notranslate nohighlight">\(Y\)</span> v pozicije (estetske lastnosti) točk (geometrijske objekte): vrednost spremenljivke <span class="math notranslate nohighlight">\(X\)</span> preslika v horizontalno pozicijo (na osi <span class="math notranslate nohighlight">\(x\)</span> diagrama), <span class="math notranslate nohighlight">\(Y\)</span> pa v vertikalno pozicijo (na osi <span class="math notranslate nohighlight">\(y\)</span>). Primeri geometrijskih objektov, ki jih pogosto uporabljamo v diagramih, so točka, črta ali pravokotnik. Estetske lastnosti točke so njena (horizontalna in vertikalna) pozicija ali lega, velikost, oblika in barva.</p>
<p>Običajni pristop k sestavljanju statističnih diagramov predvideva izbor oblike diagrama iz neke knjižnice možnih oblik in njihovo povezovanje s spremenljivkami podatkovne množice. Tak pristop uporabljajo programi za delo s preglednicami, kot sta, na primer, <em>MS Excel</em> ali <em>Google Sheets</em>.</p>
<p>Python-ovska knjižnica <code class="docutils literal notranslate"><span class="pre">plotnine</span></code> uporablja drugačen pristop, ki sloni na <strong>slovnici statističnih diagramov</strong> definirani v članku <a class="reference external" href="https://doi.org/10.1198/jcgs.2009.07098">(Wickham 2010)</a>. Slovnica določa množico <strong>osnovnih sestavnih elementov diagramov</strong>, ki jih lahko sami sestavljamo v statistične diagrame. Slovnica tako omogoča, da presežemo specifiko vnaprej pripravljenih diagramov (npr. zgoraj omenjeni razsevni diagram za dve numerični spremenljivki v programu za delo s preglednicami) z bolj splošnimi elementi za sestavljanje statističnih diagramov poljubne oblike. Slovnico implementira knjižnica <a class="reference external" href="https://ggplot2.tidyverse.org/"><code class="docutils literal notranslate"><span class="pre">ggplot2</span></code></a> v R-ju, ki je dobila tudi svojo Python-ovsko različico <code class="docutils literal notranslate"><span class="pre">plotnine</span></code>. Ker je <code class="docutils literal notranslate"><span class="pre">ggplot2</span></code> daleč bolj znana in popularna knjižnica, boste veliko lažje našli ustrezne informacije, če pri iskanju uporabljate ključno besedo <code class="docutils literal notranslate"><span class="pre">ggplot2</span></code> namesto <code class="docutils literal notranslate"><span class="pre">plotnine</span></code>.</p>
<p>V podpoglavjih spodaj bomo spoznali elemente slovnice statističnih diagramov na konkretnih primerih. Python-ovska knjižnica <code class="docutils literal notranslate"><span class="pre">plotnine</span></code> nam omogoča enostavno in postopno sestavljanje elementov z (neobičajno) uporabo operatorja <code class="docutils literal notranslate"><span class="pre">+</span></code>. Ker je vsak element definiran v svojem razdelku klica funkcije, ločenem z operatorjem <code class="docutils literal notranslate"><span class="pre">+</span></code>, lahko vsak element oblikujemo neodvisno od ostalih in (obliko) diagram(a) razvijamo po korakih. Pred nadaljevanjem pripravimo knjižnice in podatke za vizualizacijo, t.j., rezultate študentov na kolokvijih:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotnine</span> <span class="k">as</span> <span class="nn">p9</span>

<span class="n">studenti</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://kt.ijs.si/~ljupco/lectures/papvp-2324/studenti.csv&quot;</span><span class="p">)</span>
<span class="n">studenti_ocene</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://kt.ijs.si/~ljupco/lectures/papvp-2324/studenti_ocene.csv&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;studenti =</span><span class="se">\n</span><span class="si">{</span><span class="n">studenti</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">studenti_ocene =</span><span class="se">\n</span><span class="si">{</span><span class="n">studenti_ocene</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>studenti =
      ime  telefon spol  starost
0     Ana      431    ž       19
1  Branko      720    m       20
2  Cvetka      761    ž       21
3   David      141    m       19
4     Eva      210    ž       20
5   Franc      592    m       21

studenti_ocene =
       ime  semester  kolokvij  rezultat
0      Ana         1         1      80.0
1      Ana         1         2      82.0
2      Ana         2         1      97.0
3      Ana         2         2      95.0
4   Branko         1         1      78.0
5   Branko         1         2       NaN
6   Branko         2         1      74.0
7   Branko         2         2       NaN
8   Cvetka         1         1       NaN
9   Cvetka         1         2      63.0
10  Cvetka         2         1       NaN
11  Cvetka         2         2      87.0
12   David         1         1      75.0
13   David         1         2      92.0
14   David         2         1      68.0
15   David         2         2      81.0
16     Eva         1         1      63.0
17     Eva         1         2      82.0
18     Eva         2         1      82.0
19     Eva         2         2      63.0
20   Franc         1         1      95.0
21   Franc         1         2      99.0
22   Franc         2         1      82.0
23   Franc         2         2      54.0
</pre></div>
</div>
</div>
</div>
<p>Elemente statističnih diagramov bomo sproti ilustrirali na vizualizacijah podatkov iz teh tabel.</p>
<section id="podatkovna-tabela-data-estetska-preslikava-spremenljivke-aes-in-geometrijski-objekt-geom">
<h2>Podatkovna tabela <code class="docutils literal notranslate"><span class="pre">data</span></code>, estetska preslikava spremenljivke <code class="docutils literal notranslate"><span class="pre">aes</span></code> in geometrijski objekt <code class="docutils literal notranslate"><span class="pre">geom</span></code><a class="headerlink" href="#podatkovna-tabela-data-estetska-preslikava-spremenljivke-aes-in-geometrijski-objekt-geom" title="Permalink to this heading">#</a></h2>
<p>Podatke za vizualizacijo običajno uredimo v podatkovno tabelo formata <em>tidy data</em>. <strong>Podatkovna tabela</strong> je seveda ključni element diagrama, a še enkrat je treba spomniti na neodvisnost elementov v slovnici statističnih diagramov. Strukturo diagrama, ki smo jo pripravili za eno podatkovno tabelo in vsebuje tudi vse druge potrebne elemente slovnice, lahko brez omejitev (a le če je smiselno) uporabimo na različnih, tudi drugih podatkovnih tabelah.</p>
<p>Drugi pomemben element slovnice je <strong>estetska preslikava</strong> (angl. <em>aesthetic mapping</em>), ki vzpostavi povezavo med izbrano spremenljivko <code class="docutils literal notranslate"><span class="pre">X</span></code> podatkovne tabele in izbrano estetsko lastnostjo <code class="docutils literal notranslate"><span class="pre">e</span></code>. Bolj formalno, je preslikava <span class="math notranslate nohighlight">\(f_{e}: D_X \to D_e\)</span>, kjer je <span class="math notranslate nohighlight">\(D_X\)</span> domena (množica možnih) vrednosti spremenljivke <span class="math notranslate nohighlight">\(X\)</span>, <span class="math notranslate nohighlight">\(D_e\)</span> pa domena vrednosti estetske lastnosti <span class="math notranslate nohighlight">\(e\)</span>. Najbolj pogosto uporabljane estetske lastnosti so</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code> in <code class="docutils literal notranslate"><span class="pre">y</span></code> z domenami <span class="math notranslate nohighlight">\(D_\mathtt{x}, D_\mathtt{y} \subseteq \mathbb{R}\)</span> določata pozicijo (lego) geometrijskega objekta, ki ponazori vrednost spremenljivke <span class="math notranslate nohighlight">\(X\)</span> na x-osi oziroma y-osi statističnega diagrama;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shape</span></code> določi obliko objekta, <span class="math notranslate nohighlight">\(D_\mathtt{shape}\)</span> je množica možnih oblik;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code> določi velikost objekta, <span class="math notranslate nohighlight">\(D_\mathtt{size} \subseteq \mathbb{R}^{+}\)</span>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">color</span></code> oziroma <code class="docutils literal notranslate"><span class="pre">fill</span></code> določi barvo roba in notranjosti objekta, <span class="math notranslate nohighlight">\(D_\mathtt{color} = D_\texttt{fill}\)</span> je množica možnih barv.</p></li>
</ul>
<p>Za uporabo teh dveh elementov slovnice poskusimo narisati diagram, kjer bodo na x-osi imena študentov, na <span class="math notranslate nohighlight">\(y\)</span> osi pa njihovi rezultati na kolokvijih:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/947bded3c414e79aa738be965c6e8c7fb8bdeaf72e1b863d04016b22d3250650.png" src="_images/947bded3c414e79aa738be965c6e8c7fb8bdeaf72e1b863d04016b22d3250650.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Uporabili smo dve funkciji knjižnice <code class="docutils literal notranslate"><span class="pre">plotnine</span></code>. V klicu funkcije <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.ggplot.html"><code class="docutils literal notranslate"><span class="pre">ggplot</span></code></a> smo določili prvi element slovnice, podatkovno tabelo <code class="docutils literal notranslate"><span class="pre">data</span></code>. S klicem funkcije <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.mapping.aes.html"><code class="docutils literal notranslate"><span class="pre">aes</span></code></a> smo določili drugi element slovnice, estetski preslikavi za spremenljivki <code class="docutils literal notranslate"><span class="pre">ime</span></code> (pozicija <code class="docutils literal notranslate"><span class="pre">x</span></code>) in <code class="docutils literal notranslate"><span class="pre">rezultat</span></code> (pozicija <code class="docutils literal notranslate"><span class="pre">y</span></code>).</p>
<section id="geometrijski-objekt-tocka">
<h3>Geometrijski objekt točka<a class="headerlink" href="#geometrijski-objekt-tocka" title="Permalink to this heading">#</a></h3>
<p>A diagram je prazen. Zato, ker nismo določili tretje komponente slovnice, <strong>geometrijski objekt</strong> <code class="docutils literal notranslate"><span class="pre">geom</span></code>. To storimo s klicem tretje funkcije <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.geoms.geom_point.html"><code class="docutils literal notranslate"><span class="pre">geom_point</span></code></a>, ki določi, da je vsak rezultat študentov ponazorjen s točko:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/0f5925787dc5080db9a371d1b1b869ee2e50150071dd8b93f7e4daefe29f520c.png" src="_images/0f5925787dc5080db9a371d1b1b869ee2e50150071dd8b93f7e4daefe29f520c.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Pri izbiri geometrijskega objekta maramo upoštevati razpoložljiv nabor njegovih estetskih lastnosti. Estetske lastnosti točke lahko dobimo z vpogledom v dokumentacijo funkcije <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.geoms.geom_point.html"><code class="docutils literal notranslate"><span class="pre">geom_point</span></code></a> (spomnimo se, lahko poiščemo pomoč za ustrezno funkcijo knjižnice <code class="docutils literal notranslate"><span class="pre">ggplot2</span></code>). Poglejmo celoten seznam estetskih lastnosti geometrijskega objekta točka:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">shape</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span></code> in <code class="docutils literal notranslate"><span class="pre">fill</span></code> smo že spoznali;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alpha</span></code> določa <em>stopnjo prozornosti</em> barve objekta (vrednost je med 0 in 1), nižje vrednosti povečujejo prozornost;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">storke</span></code> določa debelino črte, ki ponazori rob objekta (točke).</p></li>
</ul>
<p>Poglejmo dodatne primere uporabe estetskih lastnosti:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;semester&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/dee316a3c48fe44c21eb6028df54c7f31291fddb5da6e785617f34c9e43d8a52.png" src="_images/dee316a3c48fe44c21eb6028df54c7f31291fddb5da6e785617f34c9e43d8a52.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Poglejmo estetsko preslikavo za barvo, ki jo ponazori lestvica na desni strani diagrama. Vidimo, da je lestvica pripravljena za katerokoli vrednost spremenljivke <code class="docutils literal notranslate"><span class="pre">semester</span></code> na intervalu <span class="math notranslate nohighlight">\([1,2]\)</span>. To je zato, ker je spremenljivka <code class="docutils literal notranslate"><span class="pre">semester</span></code> numeričnega tipa. Če tip te spremenljivke spremenimo v faktor, bi dobili boljši (in bolj ustrezen, pa tudi bolj pravilen) diagram:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">studenti_ocene</span><span class="o">.</span><span class="n">semester</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="o">.</span><span class="n">semester</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;semester&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/e6d31a65ccda93c13988eb2742297ec609b77459a8d9f7fdc54c76cef75e5f9c.png" src="_images/e6d31a65ccda93c13988eb2742297ec609b77459a8d9f7fdc54c76cef75e5f9c.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Estetska preslikava torej preslika diskretno spremenljivko <span class="math notranslate nohighlight">\(X\)</span> v končno množico barv <span class="math notranslate nohighlight">\(D_\texttt{color}\)</span> za katero velja <span class="math notranslate nohighlight">\(|D_\texttt{color}| = |D_X|\)</span>.</p>
<p>V estetsko lastnost oblike lahko preslikamo zgolj diskretne spremenljivke, zato bomo poskrbeli še za pretvorbo tipa spremenljivke <code class="docutils literal notranslate"><span class="pre">kolokvij</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">studenti_ocene</span><span class="o">.</span><span class="n">kolokvij</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="o">.</span><span class="n">kolokvij</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;semester&quot;</span><span class="p">,</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/138f4dec9fc1a6ed116450953f78fdb20d66f0c46881de3e2b65b90ca2dc3845.png" src="_images/138f4dec9fc1a6ed116450953f78fdb20d66f0c46881de3e2b65b90ca2dc3845.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Poskrbimo zdaj za velikost točk na diagramu: denimo, da želimo povečati vse točke na diagramu, ne glede na to, katere podatke ponazorijo. Torej zdaj ne gre za definiranje estetske preslikave (med podatki in estetsko lastnostjo), temveč rabimo zgolj <em>nastavljanje estetske lastnosti</em> geometrijskih objektov. Slednje opravimo znotraj klica funkcije <code class="docutils literal notranslate"><span class="pre">geom_point</span></code> takole:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;semester&quot;</span><span class="p">,</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/0e9e94aaeb07fdfcec2efd76f225e30dd3875be543eb592d90e2b8013122a5d9.png" src="_images/0e9e94aaeb07fdfcec2efd76f225e30dd3875be543eb592d90e2b8013122a5d9.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Za zaporedni številki semestra in kolokvija smo uporabili dve estetski lastnosti, kar se zdi potratno, glede na to, da gre za štiri zaporedne kolokvije. Namesto dveh oblik in dveh barv, bi lahko uporabili štiri barve. Zato, da to dosežemo, moramo izračunati novo spremenljivko, ki bo združevala semester in kolokvij. Na primer takole:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">studenti_ocene</span><span class="p">[</span><span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
  <span class="n">studenti_ocene</span><span class="o">.</span><span class="n">semester</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">studenti_ocene</span><span class="o">.</span><span class="n">kolokvij</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;str&quot;</span><span class="p">),</span>
  <span class="n">dtype</span> <span class="o">=</span> <span class="s2">&quot;category&quot;</span>
<span class="p">)</span>
<span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/343c5c10071bbb9985468cd274cd60df6785eb230f2ade149d1917baed3e110c.png" src="_images/343c5c10071bbb9985468cd274cd60df6785eb230f2ade149d1917baed3e110c.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="geometrijski-objekt-stolpec">
<h3>Geometrijski objekt stolpec<a class="headerlink" href="#geometrijski-objekt-stolpec" title="Permalink to this heading">#</a></h3>
<p>Z uporabo funkcije <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.geoms.geom_col.html"><code class="docutils literal notranslate"><span class="pre">geom_col</span></code></a> zamenjati geometrijski objekt iz točke v pravokotnik, ki ga v <code class="docutils literal notranslate"><span class="pre">plotnine</span></code> imenujemo stolpec, po angleško <code class="docutils literal notranslate"><span class="pre">col</span></code> od <em>column</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_col</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:344: PlotnineWarning: position_stack : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/358f5359c3ab1af838a6e741c73c8ab013ed6d328cddc6ff93a750c26382a296.png" src="_images/358f5359c3ab1af838a6e741c73c8ab013ed6d328cddc6ff93a750c26382a296.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Spomnimo se, da <code class="docutils literal notranslate"><span class="pre">color</span></code> določa le barvo <strong>roba</strong> geometrijskega objekta. Če hočemo spreminjati tudi barvo <strong>notranjosti</strong> objekta, uporabiti moramo estetsko lastnost <code class="docutils literal notranslate"><span class="pre">fill</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_col</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:344: PlotnineWarning: position_stack : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/12e3ee9765d5dd9cf949649d6c207ed58b57b0b368aa6971ae5c463f6d4dee2f.png" src="_images/12e3ee9765d5dd9cf949649d6c207ed58b57b0b368aa6971ae5c463f6d4dee2f.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Na diagramu lahko opazimo nenavadno razporeditev kolokvijev: prvi kolokvij v prvem semestru je na vrhu stolpcev, zadnji kolokvij (drugi v drugem semestru) je pa na dnu. Ta razporeditev ni naravne, za vrednosti v stolpcih diagrama pričakujemo, da so razporejene v vrstnem redu od spodaj navzgor. Pričakovali bi, torej, da so rezultati prvega kolokvija v prvem semestru na dnu stolpcev. Razpored kolokvijev je posledica vrstnega reda kategorij spremenljivke <code class="docutils literal notranslate"><span class="pre">semester_kolokvij</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kategorije</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="o">.</span><span class="n">semester_kolokvij</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">kategorije</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;1_1&#39;, &#39;1_2&#39;, &#39;2_1&#39;, &#39;2_2&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kategorije</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">studenti_ocene</span><span class="o">.</span><span class="n">semester_kolokvij</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="o">.</span><span class="n">semester_kolokvij</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">reorder_categories</span><span class="p">(</span>
  <span class="n">new_categories</span> <span class="o">=</span> <span class="n">kategorije</span>
<span class="p">)</span>
<span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_col</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:344: PlotnineWarning: position_stack : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/01d24158ba8875bd430a0558f1744ee0133134b3c9c58546a9bf853f8b848898.png" src="_images/01d24158ba8875bd430a0558f1744ee0133134b3c9c58546a9bf853f8b848898.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="geometrijski-objekt-crta">
<h3>Geometrijski objekt črta<a class="headerlink" href="#geometrijski-objekt-crta" title="Permalink to this heading">#</a></h3>
<p>Poskusimo še en osnovni geometrijski objekt, črto s funkcijo <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.geoms.geom_line.html"><code class="docutils literal notranslate"><span class="pre">geom_line</span></code></a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_line</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/14825c0d5f9d130c5e5c61ed976d8b32d9549144a15e1490c9d247d62851b4bb.png" src="_images/14825c0d5f9d130c5e5c61ed976d8b32d9549144a15e1490c9d247d62851b4bb.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Nepričakovan rezultat: črte so namreč vertikalne in povezujejo vrednosti rezultatov za vsakega študenta posebej. Prej bi pričakovali, da bi črte povezovale dosežke različnih študentov pri istem kolokviju. Zato imamo na voljo še eno estetsko lastnost <code class="docutils literal notranslate"><span class="pre">group</span></code>, ki določa skupine podatkov. Če želimo, da se črte nanašajo na posamezne kolokvije, bomo uporabili:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_line</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c144aa70672f984bbaf57e394143eedde6025e3db56f51e549811329975f8498.png" src="_images/c144aa70672f984bbaf57e394143eedde6025e3db56f51e549811329975f8498.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Zato, da izboljšamo berljivost diagrama (na zgornjem diagramu ne moremo razlikovati kolokvijev, saj so vse črte enake barve), lahko skupine pobarvamo z različnimi barvami, črte odebelimo in črtam dodamo še točke:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/19b8d322eb1ac32c2017ae995560ca587aab86d1a9fb3e5b39d7ed9c91827d8e.png" src="_images/19b8d322eb1ac32c2017ae995560ca587aab86d1a9fb3e5b39d7ed9c91827d8e.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Če zaradi tiskanja dokumenta želimo črno-belo različico zgornjega diagrama, lahko barve črt in točk nadomestimo z oblikami <code class="docutils literal notranslate"><span class="pre">linetype</span></code> in <code class="docutils literal notranslate"><span class="pre">shape</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">linetype</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/24e777206fc2c5f3bf7d27f1633dcd2ee12c4872e520e4cd30b78bb3b494b1c9.png" src="_images/24e777206fc2c5f3bf7d27f1633dcd2ee12c4872e520e4cd30b78bb3b494b1c9.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="geometrijski-objekt-skatla">
<h3>Geometrijski objekt škatla<a class="headerlink" href="#geometrijski-objekt-skatla" title="Permalink to this heading">#</a></h3>
<p>Poskusimo nazadnje še geometrijski objekt škatla, <code class="docutils literal notranslate"><span class="pre">boxplot</span></code> z uporabo funkcije <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.geoms.geom_boxplot.html"><code class="docutils literal notranslate"><span class="pre">geom_boxplot</span></code></a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span> 
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_boxplot</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:284: PlotnineWarning: stat_boxplot : Removed 4 rows containing non-finite values.
</pre></div>
</div>
<img alt="_images/27e3551aad2c0d14debad6c0f78ce9530690514dc548d52403ac46e6ee40c248.png" src="_images/27e3551aad2c0d14debad6c0f78ce9530690514dc548d52403ac46e6ee40c248.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Ta diagram nam prikaže porazdelitve rezultatov štirih kolokvijev za vsako študentko (vsakega študenta) posebej. Takemu diagramu rečemo tudi škatla z brki. Zadebeljena črta v sredini škatle ustreza mediani (srednji vrednosti) spremenljivke. Višina škatle ustreza medkvartilnim razmikom: zgornji rob škatle ustreza tretjemu, spodnji rob pa prvemu kvartilu opazovanih vrednosti spremenljivke. Brki (črte) se raztezajo pod in nad škatlo vse do minimalne oziroma maksimalne opazovane vrednosti.</p>
</section>
</section>
<section id="plasti-angl-layers-statisticnega-diagrama">
<h2>Plasti (angl. <em>layers</em>) statističnega diagrama<a class="headerlink" href="#plasti-angl-layers-statisticnega-diagrama" title="Permalink to this heading">#</a></h2>
<p>Četrti element slovnice statističnih diagramov je <strong>plast</strong>. Slednji nam omogočajo dvoje: kombiniranje več tipov geometrijskih objektov in/ ali kombiniranje podatkov iz različnih podatkovnih tabel. V takih primerih se vsaka plast prinese v diagram en tip geometrijskih objektov in eno podatkovno tabelo.</p>
<p>Večina diagramov predstavljenih v prejšnjem razdelku je <strong>enoplastnih</strong>. Enoplastni diagram vsebuje (1) geometrijske objekte enega tipa in (2) podatke iz ene podatkovne tabele. Izjema sta dva diagrama, ki kombinirata po dva tipa geometrijskih objektov. Poglejmo enega od njih, kjer ena plast vizualizira podatke s točkami, druga pa s črtami:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">linetype</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/57a79ffb0851b4b760bc0e9e6682b578e2f402af1c87d67608d42f931fecb1da.png" src="_images/57a79ffb0851b4b760bc0e9e6682b578e2f402af1c87d67608d42f931fecb1da.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Obe plasti diagrama si delita tako podatkovno tabelo kot vse estetske preslikave. Slednje so v zgornjem diagramu definirane s klicem funkcije <code class="docutils literal notranslate"><span class="pre">aes</span></code>, ki je skupen vsem plastem.</p>
<p>Plasti nam omogočajo bolj fleksibilno geometrijskih objektov z različnimi estetskimi preslikavami. Preslikave, ki so skupne vsem geometrijskim objektom, imenujemo <em>globalne estetske preslikave</em> in jih definiramo tako kot v zgornjih primerih, s klicem funkcije <code class="docutils literal notranslate"><span class="pre">aes</span></code>, ki je skupen vsem plastem. Vsakemu tipu geometrijskih objektov lahko definiramo <em>lokalne estetske preslikave</em>, ki se nanašajo zgolj na plast z objekti tega tipa. Lokalne preslikave definiramo s klicem funkcije <code class="docutils literal notranslate"><span class="pre">aes</span></code> pri nastavitvi vrednosti argumenta <code class="docutils literal notranslate"><span class="pre">mapping</span></code> funkcije s predpono <code class="docutils literal notranslate"><span class="pre">geom_</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">linetype</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">),</span>
    <span class="n">size</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/4b2e6c98d02cb531694a1b63d9f4a33edfdd5080ccdf5474884fc86d1de29f46.png" src="_images/4b2e6c98d02cb531694a1b63d9f4a33edfdd5080ccdf5474884fc86d1de29f46.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Za vajo ugotovi, kaj se zgodi, če preslikavo za estetsko lastnost <code class="docutils literal notranslate"><span class="pre">color</span></code> v zgornjem primeru prestavimo med globalne estetske preslikave.</p>
<p>Denimo, da bi hoteli diagram enak prejšnjemu, kjer bi za posamezno študentko ali posameznega študenta pobarvali zgolj tisto točko, ki ustreza njegovemu najboljšemu dosežku. Pri tem bi za študente uporabili eno, za študentke pa drugo barvo. Izračunajmo najprej najboljše dosežke za posameznega študenta ali študentko ter taki tabeli dodajmo še spol, ki ga rabimo za določanje barve ustrezne točke na diagramu:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">studenti_naj_ocene</span> <span class="o">=</span> <span class="n">studenti_ocene</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;ime&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">naj_rezultat</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;rezultat&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">))</span>
<span class="n">studenti_naj_ocene</span> <span class="o">=</span> <span class="n">studenti_naj_ocene</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">studenti</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="n">studenti_naj_ocene</span> <span class="o">=</span> <span class="n">studenti_naj_ocene</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;ime&quot;</span><span class="p">,</span> <span class="s2">&quot;spol&quot;</span><span class="p">,</span> <span class="s2">&quot;naj_rezultat&quot;</span><span class="p">]]</span>
<span class="n">studenti_naj_ocene</span> <span class="o">=</span> <span class="n">studenti_naj_ocene</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
  <span class="n">studenti_ocene</span><span class="p">,</span>
  <span class="n">left_on</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ime&quot;</span><span class="p">,</span> <span class="s2">&quot;naj_rezultat&quot;</span><span class="p">],</span>
  <span class="n">right_on</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ime&quot;</span><span class="p">,</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">],</span>
  <span class="n">how</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span>
<span class="p">)</span>
<span class="n">studenti_naj_ocene</span> <span class="o">=</span> <span class="n">studenti_naj_ocene</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;ime&quot;</span><span class="p">,</span> <span class="s2">&quot;spol&quot;</span><span class="p">,</span> <span class="s2">&quot;naj_rezultat&quot;</span><span class="p">,</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">]]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">studenti_naj_ocene</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      ime spol  naj_rezultat semester_kolokvij
0     Ana    ž          97.0               2_1
1  Branko    m          78.0               1_1
2  Cvetka    ž          87.0               2_2
3   David    m          92.0               1_2
4     Eva    ž          82.0               1_2
5     Eva    ž          82.0               2_1
6   Franc    m          99.0               1_2
</pre></div>
</div>
</div>
</div>
<p>Zdaj bomo prvemu diagramu iz tega razdelka dodali nov plast, ki uporablja podatke iz tabele <code class="docutils literal notranslate"><span class="pre">studenti_naj_ocene</span></code>. Tako kot smo prej za plast definirali lokalne estetske preslikave, bomo zdaj definirali lokalno podatkovno tabelo znotraj klica funkcije <code class="docutils literal notranslate"><span class="pre">geom_point</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">studenti_ocene</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;rezultat&quot;</span><span class="p">,</span>
    <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">linetype</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;semester_kolokvij&quot;</span><span class="p">,</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span>
  <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span>
      <span class="n">data</span> <span class="o">=</span> <span class="n">studenti_naj_ocene</span><span class="p">,</span>
      <span class="n">mapping</span> <span class="o">=</span> <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;ime&quot;</span><span class="p">,</span>
        <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;naj_rezultat&quot;</span><span class="p">,</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;spol&quot;</span>
      <span class="p">),</span>
      <span class="n">size</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ljupco/predmeti/pandas/venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 4 rows containing missing values.
</pre></div>
</div>
<img alt="_images/bb88c2a12b5d98fea3a63c9727c9748ab1cc90ab2e56922a7526655426f02626.png" src="_images/bb88c2a12b5d98fea3a63c9727c9748ab1cc90ab2e56922a7526655426f02626.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>V vseh dosedanjih primerih so bile izbire npr. uporabljenih barv samodejno. Knjižnica <code class="docutils literal notranslate"><span class="pre">plotnine</span></code> samodejno določa privzete množice možnih vrednosti estetskih lastnosti, ki jih diagram uporablja. Zato, da spremenimo privzete množice, moramo spoznati peti element slovnice statističnih izrazov, lestvice.</p>
</section>
<section id="lestvice-legende-koordinatne-osi-in-koordinatni-sistemi">
<h2>Lestvice, legende, koordinatne osi in koordinatni sistemi<a class="headerlink" href="#lestvice-legende-koordinatne-osi-in-koordinatni-sistemi" title="Permalink to this heading">#</a></h2>
<section id="funkcije-za-koordinatne-osi-in-koordinatni-sistem">
<h3>Funkcije za koordinatne osi in koordinatni sistem<a class="headerlink" href="#funkcije-za-koordinatne-osi-in-koordinatni-sistem" title="Permalink to this heading">#</a></h3>
</section>
<section id="funkcije-za-legende">
<h3>Funkcije za legende<a class="headerlink" href="#funkcije-za-legende" title="Permalink to this heading">#</a></h3>
</section>
</section>
<section id="prilagajanje-pozicije-angl-position-adjustment">
<h2>Prilagajanje pozicije, angl. <em>position adjustment</em><a class="headerlink" href="#prilagajanje-pozicije-angl-position-adjustment" title="Permalink to this heading">#</a></h2>
</section>
<section id="vec-vidikov-angl-faceting">
<h2>Več vidikov, angl. <em>faceting</em><a class="headerlink" href="#vec-vidikov-angl-faceting" title="Permalink to this heading">#</a></h2>
</section>
<section id="naloge">
<h2>Naloge<a class="headerlink" href="#naloge" title="Permalink to this heading">#</a></h2>
<p>V pripravi.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="osnovna-analiza.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Osnovna analiza podatkov</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#podatkovna-tabela-data-estetska-preslikava-spremenljivke-aes-in-geometrijski-objekt-geom">Podatkovna tabela <code class="docutils literal notranslate"><span class="pre">data</span></code>, estetska preslikava spremenljivke <code class="docutils literal notranslate"><span class="pre">aes</span></code> in geometrijski objekt <code class="docutils literal notranslate"><span class="pre">geom</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometrijski-objekt-tocka">Geometrijski objekt točka</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometrijski-objekt-stolpec">Geometrijski objekt stolpec</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometrijski-objekt-crta">Geometrijski objekt črta</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometrijski-objekt-skatla">Geometrijski objekt škatla</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plasti-angl-layers-statisticnega-diagrama">Plasti (angl. <em>layers</em>) statističnega diagrama</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lestvice-legende-koordinatne-osi-in-koordinatni-sistemi">Lestvice, legende, koordinatne osi in koordinatni sistemi</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcije-za-koordinatne-osi-in-koordinatni-sistem">Funkcije za koordinatne osi in koordinatni sistem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#funkcije-za-legende">Funkcije za legende</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prilagajanje-pozicije-angl-position-adjustment">Prilagajanje pozicije, angl. <em>position adjustment</em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vec-vidikov-angl-faceting">Več vidikov, angl. <em>faceting</em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#naloge">Naloge</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Ljupčo Todorovski
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>